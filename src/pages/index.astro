---
import Layout from "@layouts/Layout.astro";
import MapPin from "~icons/heroicons/map-pin-20-solid";
import Mail from "~icons/lucide/mail";
import GitHub from "~icons/simple-icons/github";
import Discord from "~icons/simple-icons/discord";
import BlueSky from "~icons/simple-icons/bluesky";
import Languages from "~icons/heroicons/language-16-solid";
import { getCollection } from "astro:content";
import HeadingGroup from "@components/HeadingGroup.astro";
import { createLocale } from "@lib/i18n";

const blogEntries = (await getCollection("blog"))
    .filter((blog) => !blog.data.draft)
    .sort((a, b) => (a.data.date > b.data.date ? -1 : 1));

const { str, locale, getLocaleUrl } = createLocale(Astro.url);
---

<!-- <script>
    const emaildecode = (e: HTMLAnchorElement) => {
        let email = atob(e.dataset.mail || '');
        e.href = 'mailto:'+email;
        const mailDisplay = e.querySelector('#mail-display');
        if (mailDisplay) mailDisplay.textContent = email;
    }

    document.querySelectorAll('a[data-mail]').forEach(x => emaildecode(x as HTMLAnchorElement));
    document.addEventListener('astro:after-swap', () => {
        document.querySelectorAll('a[data-mail]').forEach(x => emaildecode(x as HTMLAnchorElement));
    });
</script> -->

<Layout title="Nils Beerten" lang={locale} description={str("I'm Nils Beerten. This is my personal website where I show my creations and occasionally write posts.", "Persoonlijke website van Nils Beerten waarop ik mijn creaties toon en af en toe blogposts schrijf.")}>
    <section>
        <HeadingGroup title="Nils Beerten" smallMargin>
            <Fragment slot="subtitle">
                <span aria-hidden="true" aria-label="IPA pronunciation">/niːls bɪːrtən/</span>
            </Fragment>
        </HeadingGroup>
        <!-- <div class="flex gap-10 w-full border-red-500 border justify-between"> -->
        <div>
            <!-- <p class="max-w-[60ch] [text-wrap:pretty] pt-2">
                    {str(
                        "a",
                        "b"
                    )}
                </p> -->
            <ul
                class="social-links mt-2 flex flex-col gap-2 text-brand-text"
                aria-label={str(
                    "Social links and other information",
                    "Social links en andere informatie"
                )}>
                <li class="contents">
                    <div class="mb-1">
                        <MapPin />
                        <p
                            class="mb-px"
                            aria-label={str("Location: The Netherlands", "Locatie: Nederland")}>
                            {str("Netherlands", "Nederland")}
                        </p>
                    </div>
                </li>
                <!-- <li class="contents">
                    <a href="#" data-mail="Y29udGFjdEBuaWxzYmVlcnRlbi5ubAo=">
                        <span class="sr-only">Email:</span>
                        <Mail />
                        <p class="mb-px" id="mail-display">{str("Contact", "Contact")}</p>
                    </a>
                </li> -->
                <li class="contents">
                    <a href="https://github.com/nbeerten">
                        <GitHub />
                        <p
                            class="mb-px"
                            aria-label={`GitHub ${str("username", "gebruikersnaam")}: nbeerten`}>
                            nbeerten
                        </p>
                    </a>
                </li>
                <li class="contents">
                    <a href="https://bsky.app/profile/nilsbeerten.nl">
                        <BlueSky />
                        <p
                            class="mb-px"
                            aria-label={`Bluesky ${str("username", "gebruikersnaam")}: @nilsbeerten.nl`}>
                            @nilsbeerten.nl
                        </p>
                    </a>
                </li>
                <li class="contents">
                    <div>
                        <Discord />
                        <p
                            class="mb-px"
                            aria-label={`Discord ${str("username", "gebruikersnaam")}: @nbeerten`}>
                            @nbeerten
                        </p>
                    </div>
                </li>
            </ul>
            <style>
                .social-links {
                    svg {
                        @apply h-5 w-5;
                    }

                    & > li > a,
                    & > li > div {
                        @apply flex w-max items-center gap-2;
                    }

                    a {
                        @apply underline decoration-brand-border underline-offset-1;
                    }
                }
            </style>
        </div>
        <!-- <div>
                <div class="aspect-square bg-black h-full max-h-40 max-w-40 rounded-sm overflow-clip"><img src="/pfp.jpg" alt="Nils Beerten" /></div>
            </div>
        </div> -->
    </section>

    <hr class="my-5 border-brand-hr" />

    <section>
        <h2 class="-ml-px font-display text-xl font-medium text-brand-muted">
            {str("Creations", "Creaties")}
        </h2>
        <ul class="grid grid-cols-1 gap-4 py-3 md:grid-cols-2">
            <li>
                <a
                    href="https://github.com/nbeerten/nilsbeerten.nl/"
                    target="_blank"
                    class="text-lg font-medium underline decoration-brand-border underline-offset-1">
                    nilsbeerten.nl
                </a>
                <p class="[text-wrap:pretty]">
                    {
                        str(
                            "Simple and minimal personal site built with Astro.",
                            "Een eenvoudige en minimalistische website, gemaakt met Astro."
                        )
                    }
                </p>
            </li>

            {
                /* Not actively maintained anymore; so removed from the website
            <div>
                <a
                    href="https://github.com/nbeerten/tm-refresh-leaderboard/"
                    target="_blank"
                    class="text-lg font-medium underline decoration-brand-border underline-offset-1">
                    tm-refresh-leaderboard
                </a>
                <p class="[text-wrap:pretty]">
                    {
                        str(
                            "Trackmania plugin to refresh the in-game leaderboards.",
                            "Een Trackmania integratie die de in-game ranglijsten ververst."
                        )
                    }
                </p>
            </div> */
            }

            <li>
                <a
                    href="https://github.com/nbeerten/sluis/"
                    target="_blank"
                    class="text-lg font-medium underline decoration-brand-border underline-offset-1">
                    Sluis
                </a>
                <p
                    class="[text-wrap:pretty]"
                    set:html={str(
                        `A new desktop-optimised frontend for <a href="https://piped.video/" class="underline inline">Piped</a>.`,
                        `Een nieuwe desktop-geoptimaliseerde frontend voor <a href="https://piped.video/" class="underline">Piped</a>.`
                    )}
                />
            </li>
        </ul>
    </section>

    {
        blogEntries.length > 0 && (
            <section class="mt-6">
                <h2 class="-ml-px font-display text-xl font-medium text-brand-muted">Blog</h2>
                <ul class="flex flex-col gap-4 py-3">
                    {blogEntries.slice(0, 3).map((blogPost) => (
                        <li class="contents">
                            <article>
                                <div class="flex justify-between">
                                    <a
                                        href={getLocaleUrl(`/blog/${blogPost.slug}`)}
                                        class="text-lg font-medium underline decoration-brand-border underline-offset-1">
                                        {blogPost.data.title}
                                    </a>
                                    <span class="inline-flex items-center gap-1 text-brand-muted">
                                        <p class="inline-flex items-center gap-1">
                                            <Languages class="-mb-0.5 h-4 w-4" />
                                            <span
                                                aria-label={`${str("Language", "Taal")}: ${blogPost.data.language}`}>
                                                {blogPost.data.language}
                                            </span>
                                        </p>
                                        <span aria-hidden="true">-</span>
                                        <p class="tabular-nums tracking-tighter">
                                            <span class="sr-only">
                                                {str("Posted on", "Gepubliceerd op")}
                                            </span>
                                            {blogPost.data.date.toLocaleDateString(locale, {
                                                month: "short",
                                                day: "numeric",
                                                year: "numeric",
                                            })}
                                        </p>
                                    </span>
                                </div>
                                <p class="[text-wrap:pretty]">{blogPost.data.description}</p>
                            </article>
                        </li>
                    ))}
                </ul>
                <div class="pt-1">
                    <a href={getLocaleUrl("/blog")} class="text-brand-muted">
                        {str("All posts", "Alle posts")} →
                    </a>
                </div>
            </section>
        )
    }
</Layout>
